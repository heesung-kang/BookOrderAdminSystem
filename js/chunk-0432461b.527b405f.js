(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0432461b"],{"130c":function(t,e,a){},"2ce3":function(t,e,a){"use strict";a("130c")},3784:function(t,e,a){},4273:function(t,e,a){},5408:function(t,e,a){"use strict";a.r(e);var s=a("a05a"),i=a("8336"),r=a("2e4b"),n=a("169a"),c=a("2fa4"),o=a("8654"),l={props:["clear"],data:()=>({date:"",visible:!1,pickerDate:null,modal:!1,placeholder:"2022/11/11"}),watch:{date(t){this.$emit("updateDate",t)},clear(t,e){t!==e&&(this.date="")},pickerDate(){this.hangleDelete()}},mounted(){this.placeholder=this.$date().format("YYYY-MM-DD"),this.$nextTick((function(){null===this.defaultValue&&""===this.defaultValue||(this.date=this.defaultValue)}))},methods:{hangleDelete(){let t=setTimeout((function(){document.querySelectorAll(".v-date-picker-table .v-btn__content").forEach(t=>{t.textContent=t.textContent.replace("일","")}),clearInterval(t)}),100)}}},d=(a("2ce3"),a("2877")),h=Object(d.a)(l,(function(){var t=this,e=t._self._c;return e(n.a,{ref:"dialog",attrs:{"return-value":t.date,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.date=e},"update:return-value":function(e){t.date=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(o.a,t._g(t._b({attrs:{readonly:"",placeholder:t.placeholder},on:{click:t.hangleDelete},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},"v-text-field",s,!1),a))]}}]),model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[e(r.a,{attrs:{scrollable:"",locale:"ko","picker-date":t.pickerDate},on:{"update:pickerDate":function(e){t.pickerDate=e},"update:picker-date":function(e){t.pickerDate=e}},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}},[e(c.a),e(i.a,{attrs:{text:"",color:"primary"},on:{click:function(e){t.modal=!1}}},[t._v(" 취소 ")]),e(i.a,{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.dialog.save(t.date)}}},[t._v(" 설정 ")])],1)],1)}),[],!1,null,null,null).exports,u={name:"SearchDateRangeGroup",components:{Selects:s.a,DatePicker:h},props:["itemList"],data:()=>({startDate:"",endDate:"",shop_name:"",clear:!1}),methods:{search(){void 0!==this.startDate||void 0===this.endDate?void 0===this.startDate||void 0!==this.endDate?void 0!==this.startDate&&void 0!==this.endDate&&this.startDate>this.endDate?alert("종료일이 시작일보다 빠릅니다. 시작일을 다시 입력해주세요"):this.$emit("search",{shop_name:this.shop_name,startDate:this.startDate,endDate:this.endDate}):alert("종료일을 입력해주세요"):alert("시작일을 입력해주세요")},setStartDate(t){this.startDate=t},setEndDate(t){this.endDate=t}}},m=(a("7821"),Object(d.a)(u,(function(){var t=this,e=t._self._c;return e("section",{staticClass:"search-header d-flex align-center"},[e("span",{staticClass:"d-flex align-center select-wrap"},[e("Selects",{attrs:{itemList:t.itemList}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.shop_name,expression:"shop_name"}],staticClass:"basic",attrs:{type:"text"},domProps:{value:t.shop_name},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search.apply(null,arguments)},input:function(e){e.target.composing||(t.shop_name=e.target.value)}}})],1),e("span",{staticClass:"d-flex align-center date-wrap"},[e("span",{staticClass:"date-picker mobile-margin"},[e("DatePicker",{attrs:{clear:t.clear},on:{updateDate:t.setStartDate}})],1),e("span",{staticClass:"to"},[t._v("To")]),e("span",{staticClass:"date-picker"},[e("DatePicker",{attrs:{clear:t.clear},on:{updateDate:t.setEndDate}})],1),e("button",{staticClass:"basic btn",on:{click:t.search}},[t._v("검색")])])])}),[],!1,null,"4b84291e",null).exports),p=(a("14d9"),a("2f62")),f=a("e71f"),b=a("e31c"),_=a("f3e4");function v(t,e){for(let a=0;a<t.length;a++)if(t[a].shop_name===e.shop_name&&t[a].timestamp===e.timestamp)return a;return-1}var D=a("3129"),k={name:"TableSkeleton"},O={name:"OrderList",components:{TableSkeleton:Object(d.a)(k,(function(){return(0,this._self._c)(D.a,{attrs:{type:"table-thead, table-tbody",types:{"table-tbody":"table-row-divider@3","table-row":"table-cell@3","table-thead":"heading@3"}}})}),[],!1,null,"1c06d3ce",null).exports},props:["searchObj"],data:()=>({list:["test"],books:[],result:[],searchResult:[]}),computed:{...Object(p.b)("common",["skeletonLoading"])},watch:{searchObj(){this.search()}},async created(){try{this.$store.commit("common/setSkeleton",!0);const{info:{sid:t}}=Object(_.b)("userInfo"),e=Object(f.g)(Object(f.a)(b.b,"orderRequest"),Object(f.k)("sid","==",t),Object(f.f)("order_time_id","desc"));(await Object(f.d)(e)).forEach(t=>{const e=t.data();e.timestamp=this.$date(t.data().order_time.toDate()).format("YYYY-MM-DD HH:mm:ss"),"-"===t.data().reply_time?e.replytimestamp="-":e.replytimestamp=this.$date(t.data().reply_time.toDate()).format("YYYY-MM-DD HH:mm:ss"),this.books.push(e)}),this.result=function(t){const e=[];for(let a=0;a<t.length;a++){let s=v(e,t[a]);s>-1?e[s].count+=Number(t[a].count):e.push(t[a])}return e}(this.books),this.searchResult=this.searchResult.concat(this.result)}catch(t){console.log(t)}this.$store.commit("common/setSkeleton",!1)},methods:{search(){this.result=this.searchResult.filter(t=>{if(""===this.searchObj.shop_name&&void 0===this.searchObj.startDate)return t;if(""===this.searchObj.shop_name&&void 0!==this.searchObj.startDate){if(t.timestamp>=this.searchObj.startDate&&t.timestamp<=this.searchObj.endDate)return t}else if(""!==this.searchObj.shop_name&&t.shop_name.includes(this.searchObj.shop_name)){if(void 0===this.searchObj.startDate)return t;if(t.timestamp>=this.searchObj.startDate&&t.timestamp<=this.searchObj.endDate)return t}})},statement(t){this.$router.push(`/OrderListDetail/${t.id}/${t.date}/${t.orderTimeId}/${t.shopName}/${t.uid}`)}}},j=(a("ab53"),{components:{SearchDateRangeGroup:m,OrderList:Object(d.a)(O,(function(){var t=this,e=t._self._c;return e("section",[t.skeletonLoading?e("TableSkeleton"):e("table",{staticClass:"basic"},[e("caption",[t._v("\n      서점별 주문리스트\n    ")]),e("thead",[e("tr",[e("th",[t._v("서점")]),e("th",[t._v("수량")]),e("th",[t._v("상태")]),e("th",[t._v("발신일시")]),e("th",[t._v("회신일시")])])]),e("tbody",t._l(t.result,(function(a,s){return e("tr",{key:s,on:{click:function(e){return t.statement({id:a.sid,date:a.timestamp,orderTimeId:a.order_time_id,shopName:a.shop_name,uid:a.uid})}}},[e("td",[t._v(t._s(a.shop_name))]),e("td",[t._v(t._s(a.count))]),e("td",[t._v("\n          "+t._s(0===a.shop_order_status?"회신 전":1===a.shop_order_status?"회신":2===a.shop_order_status?"발주":"출고")+"\n        ")]),e("td",[t._v(t._s(a.timestamp))]),e("td",[t._v(t._s(a.replytimestamp))])])})),0),0===t.result.length?e("tfoot",[e("tr",[e("td",{attrs:{colspan:"5"}},[t._v("주문 리스트가 없습니다.")])])]):t._e()])],1)}),[],!1,null,"193e8639",null).exports},data:()=>({itemList:[{item:"서점",value:"shop"}],searchObj:{}}),methods:{search(t){this.searchObj=t}}}),y=(a("fc8f"),Object(d.a)(j,(function(){var t=this._self._c;return t("section",[t("h2",{staticClass:"sub-title"},[this._v("주문 목록 보기")]),t("section",{staticClass:"sub-container"},[t("h3",[this._v("서점 주문 리스트")]),t("section",{staticClass:"mt10"},[t("SearchDateRangeGroup",{attrs:{itemList:this.itemList},on:{search:this.search}})],1),t("section",{staticClass:"mt30"},[t("OrderList",{attrs:{searchObj:this.searchObj}})],1)])])}),[],!1,null,"18b7ea3c",null));e.default=y.exports},7821:function(t,e,a){"use strict";a("4273")},"7b94":function(t,e,a){"use strict";a("3784")},"9d86":function(t,e,a){},a05a:function(t,e,a){"use strict";var s=a("b974"),i={props:["itemList"],data:()=>({select:""}),mounted(){this.select=this.itemList[0].value}},r=(a("7b94"),a("2877")),n=Object(r.a)(i,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"selects"},[e(s.a,{attrs:{dense:"",items:t.itemList,"item-text":"item","item-value":"value",outlined:""},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}})],1)}),[],!1,null,"e20526fa",null);e.a=n.exports},ab53:function(t,e,a){"use strict";a("9d86")},c096:function(t,e,a){},fc8f:function(t,e,a){"use strict";a("c096")}}]);