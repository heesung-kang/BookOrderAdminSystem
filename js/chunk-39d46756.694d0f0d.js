(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-39d46756"],{"10a8":function(t,a,e){"use strict";e("402d")},"1f0b":function(t,a,e){"use strict";var s=e("3129"),i={name:"BookListMobileSkeleton"},o=(e("f412"),e("2877")),l=Object(o.a)(i,(function(){var t=this._self._c;return t("div",[t("ul",[t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}}),t(s.a,{attrs:{type:"text"}})],1)])])])])}),[],!1,null,"975c769e",null);a.a=l.exports},"21b3":function(t,a,e){},2469:function(t,a,e){},"402d":function(t,a,e){},4809:function(t,a,e){},5245:function(t,a,e){"use strict";e.r(a);e("14d9");var s=e("2f62"),i=e("68e0"),o=e("490a"),l=e("e71f"),r=e("e31c"),c={name:"Order",components:{modalWrap:e("7402").a},props:["books"],data:()=>({memo:""}),computed:{...Object(s.b)("common",["loading"])},methods:{close(){this.$emit("close")},async save(){try{this.$store.commit("common/setLoading",!0);const t=Object(l.k)(),a=Object(l.o)(r.b);await this.books.forEach(e=>{const s=Object(l.d)(r.b,"orderRequest",e.id);a.update(s,{publisher_reply_status:e.data.publisher_reply_status,reply_count:parseInt(e.data.reply_count),shop_order_status:1,reply_time:t,reply_time_id:this.$date().format("YYYYMMDDHHmmss"),memo:this.memo})}),await a.commit(),this.$emit("close"),this.$attrs.update()}catch(t){console.log(t)}this.$store.commit("common/setLoading",!1)}}},n=(e("10a8"),e("2877")),d=Object(n.a)(c,(function(){var t=this,a=t._self._c;return a("modalWrap",{on:{close:t.close}},[a("template",{slot:"head"},[a("h2",[t._v("메모")])]),a("template",{slot:"body"},[a("div",{staticClass:"v-application"},[t.loading?a(o.a,{staticClass:"spinner",attrs:{size:70,width:7,color:"amber",indeterminate:""}}):t._e()],1),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.memo,expression:"memo"}],attrs:{placeholder:"남기실 메모가 있으면 적어주세요"},domProps:{value:t.memo},on:{input:function(a){a.target.composing||(t.memo=a.target.value)}}}),a("div",{staticClass:"btn-wrap"},[a("button",{staticClass:"primary",on:{click:t.save}},[t._v("보내기")])])])],2)}),[],!1,null,"76a61d57",null).exports,u=e("b974"),p={props:["dafaultValue","index"],data:()=>({select:0,itemList:[{item:"정상",value:0},{item:"품절",value:1},{item:"절판",value:2},{item:"재고부족",value:3}]}),watch:{select(t){this.$emit("select",{value:t,index:this.index})}},mounted(){this.select=this.dafaultValue}},v=(e("ebc4"),Object(n.a)(p,(function(){var t=this,a=t._self._c;return a("div",{staticClass:"selects"},[a(u.a,{attrs:{dense:"",items:t.itemList,"item-text":"item","item-value":"value",outlined:""},model:{value:t.select,callback:function(a){t.select=a},expression:"select"}})],1)}),[],!1,null,"551e7ea0",null).exports),m=e("691b"),_=e("1f0b"),b={components:{SelectsReply:v,BookListSkeleton:m.a,BookListMobileSkeleton:_.a},props:["id","orderTimeId","uid"],data:()=>({selected:[],books:[],error:0}),computed:{...Object(s.b)("common",["windowWidth","mobile","skeletonLoading"]),bookCount(){let t=0;return this.books.forEach(a=>t+=Number(a.data.reply_count)),t},totalPrice(){let t=0;return this.books.forEach(a=>{if(""!==a.data.shop_rate&&a.data.shop_rate.length>0){if(a.data.shop_rate.some(t=>t.uid===this.uid)){let e="";a.data.shop_rate.forEach(t=>{t.uid===this.uid&&(e=t.rate)}),t+=a.data.price*Number(e)*a.data.count/100}}else t+=a.data.price*a.data.supply_rate*a.data.count/100}),t}},created(){this.load()},methods:{async load(){try{this.books=[],this.$store.commit("common/setSkeleton",!0);const t=Object(l.j)(Object(l.b)(r.b,"orderRequest"),Object(l.n)("uid","==",this.uid),Object(l.n)("sid","==",Number(this.id)),Object(l.n)("order_time_id","==",this.orderTimeId)),a=await Object(l.f)(t);await a.forEach(t=>{this.books.push({id:t.id,data:t.data()})})}catch(t){console.log(t)}this.$store.commit("common/setSkeleton",!1)},showModal(){this.error=0,this.books.forEach(t=>{t.data.count<t.data.reply_count&&(this.error+=1)}),0===this.error?this.mobile?this.$modal.show(d,{books:this.books,update:this.load},Object(i.a)("ModalMemo","95%","auto",!1)):this.$modal.show(d,{books:this.books,update:this.load},Object(i.a)("ModalMemo","500px","auto",!1)):alert("공급이 주문보다 많습니다.")},changeStatus(t){switch(this.books[t.index].data.publisher_reply_status=t.value,t.value){case 0:this.books[t.index].data.reply_count=this.books[t.index].data.count;break;case 1:case 2:this.books[t.index].data.reply_count=0}}}},h=(e("7f39"),{components:{OrderResultList:Object(n.a)(b,(function(){var t=this,a=t._self._c;return a("section",[!t.mobile&&t.skeletonLoading?a("BookListSkeleton"):t._e(),t.mobile&&t.skeletonLoading?a("BookListMobileSkeleton"):t._e(),t.mobile||t.skeletonLoading?t._e():a("section",{staticClass:"header d-flex"},[a("div",[t._v("품목정보")]),a("div",[t._v("ISBN")]),t._m(0),a("div",[t._v("공급가")]),a("div",[t._v("주문")]),a("div",[t._v("공급")]),a("div",[t._v("회신")])]),a("ul",{staticClass:"body"},t._l(t.books,(function(e,s){var i;return a("li",{key:s,staticClass:"d-flex align-center",class:{none:e.data.shop_order_status>1&&!1===e.data.order_check}},[a("div",{staticClass:"d-flex align-center info-wrap"},[a("div",{staticClass:"book-info"},[a("h3",[t._v(t._s(e.data.subject))]),a("div",{staticClass:"author"},[t._v(t._s(e.data.author))])])]),a("div",{staticClass:"isbn"},[t._v(t._s(e.data.isbn))]),a("div",{staticClass:"d-flex price-info"},[a("div",{staticClass:"normal-price"},[t.mobile?a("span",[t._v("정가")]):t._e(),t._v(" "+t._s(null===(i=e.data.price)||void 0===i?void 0:i.toLocaleString())+"원")]),e.data.shop_rate.length>0&&e.data.shop_rate.some(a=>a.uid===t.uid)?a("div",t._l(e.data.shop_rate,(function(e){return a("span",{key:e.uid},[t.uid===e.uid?a("span",[t.mobile?a("span",[t._v("공급률")]):t._e(),t._v(" "+t._s(e.rate)+"%")]):t._e()])})),0):t._e(),0===e.data.shop_rate.length||e.data.shop_rate.length>0&&!e.data.shop_rate.some(a=>a.uid===t.uid)?a("div",[t.mobile?a("span",[t._v("공급률")]):t._e(),t._v(" "+t._s(e.data.supply_rate)+"%\n        ")]):t._e()]),e.data.shop_rate.length>0&&e.data.shop_rate.some(a=>a.uid===t.uid)?a("div",{staticClass:"final-price"},t._l(e.data.shop_rate,(function(s){return a("span",{key:s.uid},[t.uid===s.uid?a("span",[t.mobile?a("span",[t._v("공급가")]):t._e(),t._v(t._s((e.data.price*s.rate/100).toLocaleString())+"원")]):t._e()])})),0):a("div",{staticClass:"final-price"},[t.mobile?a("span",[t._v("공급가")]):t._e(),t._v(" "+t._s((e.data.price*e.data.supply_rate/100).toLocaleString())+"원\n      ")]),a("div",{staticClass:"count"},[t.mobile?a("span",[t._v("주문")]):t._e(),t._v(" "+t._s(e.data.count))]),a("div",{staticClass:"count"},[t.mobile?a("span",[t._v("공급")]):t._e(),0===e.data.shop_order_status?a("input",{directives:[{name:"model",rawName:"v-model",value:e.data.reply_count,expression:"book.data.reply_count"}],staticClass:"basic reply-count",attrs:{type:"number",disabled:3!==e.data.publisher_reply_status},domProps:{value:e.data.reply_count},on:{input:function(a){a.target.composing||t.$set(e.data,"reply_count",a.target.value)}}}):a("span",{class:{warning:e.data.count>e.data.reply_count}},[t._v(t._s(e.data.reply_count))])]),a("div",{staticClass:"btn-wrap"},[0===e.data.shop_order_status?a("SelectsReply",{attrs:{index:s,dafaultValue:e.data.publisher_reply_status},on:{select:t.changeStatus}}):a("div",[t._v("\n          "+t._s(0===e.data.publisher_reply_status?"정상":1===e.data.publisher_reply_status?"품절":2===e.data.publisher_reply_status?"절판":"재고부족")+"\n        ")])],1)])})),0),t.skeletonLoading?t._e():a("section",{staticClass:"total-wrap mt24"},[a("div",[a("span",{staticClass:"total-prod"},[t._v("총 "+t._s(t.bookCount)+"권")]),a("span",{staticClass:"total"},[t._v("합계 "+t._s(t.totalPrice.toLocaleString())+"원")])]),a("div",{staticClass:"d-flex"},[0!==t.books[0].data.shop_order_status?a("span",[t._v("회신완료")]):a("button",{staticClass:"primary",attrs:{disabled:0!==t.books[0].data.shop_order_status},on:{click:t.showModal}},[t._v("회신")])])])],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"d-flex"},[t("div",[this._v("정가")]),t("div",[this._v("공급률")])])}],!1,null,"a9666d54",null).exports},data(){return{id:this.$route.params.id,date:this.$route.params.date,shopName:this.$route.params.shopName,orderTimeId:this.$route.params.orderTimeId,uid:this.$route.params.uid}}}),x=(e("81ff"),Object(n.a)(h,(function(){var t=this,a=t._self._c;return a("section",[a("h2",{staticClass:"sub-title"},[t._v("주문 상세 보기 및 회신")]),a("section",{staticClass:"sub-container"},[a("article",{staticClass:"order-info d-flex justify-space-between"},[a("div",[t._v("\n        서점명: "),a("strong",[t._v(t._s(t.shopName))])]),a("div",[t._v(t._s(t.date))])]),a("OrderResultList",{attrs:{id:t.id,orderTimeId:t.orderTimeId,uid:t.uid}})],1)])}),[],!1,null,"f5dbbca2",null));a.default=x.exports},"68e0":function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));const s=function(t,a,e,s){return{name:t,width:a,height:e,resizable:s,clickToClose:!0,draggable:".popup-title",scrollable:!0}}},"691b":function(t,a,e){"use strict";var s=e("3129"),i={name:"BookListSkeleton"},o=(e("b57b"),e("2877")),l=Object(o.a)(i,(function(){var t=this._self._c;return t("div",[t("ul",[t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(s.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(s.a,{attrs:{type:"text"}})],1)])])])])}),[],!1,null,"d8eeb990",null);a.a=l.exports},7402:function(t,a,e){"use strict";var s=e("132d"),i={methods:{close(){this.$emit("close")}}},o=(e("cc0a"),e("2877")),l=Object(o.a)(i,(function(){var t=this._self._c;return t("div",{staticClass:"modal-wrap"},[t("div",{staticClass:"close",on:{click:this.close}},[t(s.a,[this._v("mdi-window-close")])],1),this._t("head"),t("div",{staticClass:"line"}),t("div",{staticClass:"body"},[this._t("body")],2),this._t("footer")],2)}),[],!1,null,"1c84da6b",null);a.a=l.exports},"7f39":function(t,a,e){"use strict";e("21b3")},"81ff":function(t,a,e){"use strict";e("f029")},b57b:function(t,a,e){"use strict";e("da01")},c2fe:function(t,a,e){},cc0a:function(t,a,e){"use strict";e("4809")},da01:function(t,a,e){},ebc4:function(t,a,e){"use strict";e("2469")},f029:function(t,a,e){},f412:function(t,a,e){"use strict";e("c2fe")}}]);