(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5e012fa6"],{"1f0b":function(t,s,e){"use strict";var a=e("3129"),i={name:"BookListMobileSkeleton"},o=(e("f412"),e("2877")),l=Object(o.a)(i,(function(){var t=this._self._c;return t("div",[t("ul",[t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}}),t(a.a,{attrs:{type:"text"}})],1)])])])])}),[],!1,null,"975c769e",null);s.a=l.exports},"333e":function(t,s,e){},5266:function(t,s,e){"use strict";e("53b2")},"53b2":function(t,s,e){},"691b":function(t,s,e){"use strict";var a=e("3129"),i={name:"BookListSkeleton"},o=(e("b57b"),e("2877")),l=Object(o.a)(i,(function(){var t=this._self._c;return t("div",[t("ul",[t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1)])]),t("li",[t("section",{staticClass:"d-flex align-center justify-space-between skeleton-book-list"},[t("div",{staticClass:"img"},[t(a.a,{attrs:{type:"list-item-avatar-two-line"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1),t("div",{staticClass:"text"},[t(a.a,{attrs:{type:"text"}})],1)])])])])}),[],!1,null,"d8eeb990",null);s.a=l.exports},"7bb1":function(t,s,e){"use strict";e("b007")},a05a:function(t,s,e){"use strict";var a=e("b974"),i={props:["itemList"],data:()=>({select:""}),mounted(){this.select=this.itemList[0].value}},o=(e("c715"),e("2877")),l=Object(o.a)(i,(function(){var t=this,s=t._self._c;return s("div",{staticClass:"selects"},[s(a.a,{attrs:{dense:"",items:t.itemList,"item-text":"item","item-value":"value",outlined:""},on:{input:function(s){return t.$emit("change",t.select)}},model:{value:t.select,callback:function(s){t.select=s},expression:"select"}})],1)}),[],!1,null,"5d7fff57",null);s.a=l.exports},b007:function(t,s,e){},b57b:function(t,s,e){"use strict";e("da01")},c2fe:function(t,s,e){},c715:function(t,s,e){"use strict";e("333e")},da01:function(t,s,e){},e424:function(t,s,e){"use strict";e.r(s);e("14d9");var a=e("2f62"),i=e("a05a"),o=e("691b"),l=e("1f0b"),c=e("e71f"),r=e("e31c"),n={components:{Selects:i.a,BookListSkeleton:o.a,BookListMobileSkeleton:l.a},props:["id","orderRealTimeId","uid"],data:()=>({select:"",itemList:[{item:"배본사 선택",value:""}],books:[],address1:"",address2:""}),computed:{...Object(a.b)("common",["windowWidth","mobile","skeletonLoading"]),bookCount(){let t=0;return this.books.forEach(s=>t+=Number(s.data.reply_count)),t},totalPrice(){let t=0;return this.books.forEach(s=>{t+=s.data.price*Number(s.data.supply_rate)*s.data.reply_count/100}),t}},async created(){await this.load(),await this.distribution(),await this.getAddress()},methods:{async load(){try{this.books=[],this.$store.commit("common/setSkeleton",!0);const t=Object(c.i)(Object(c.b)(r.b,"orderRequest"),Object(c.m)("uid","==",this.uid),Object(c.m)("sid","==",Number(this.id)),Object(c.m)("order_check","==",!0),Object(c.m)("order_real_time_id","==",this.orderRealTimeId)),s=await Object(c.f)(t);await s.forEach(t=>{this.books.push({id:t.id,data:t.data()})})}catch(t){console.log(t)}this.$store.commit("common/setSkeleton",!1)},async getAddress(){const t=this.books[0].data.uid,s=Object(c.d)(r.b,"shopInfo",t),e=await Object(c.e)(s);this.address1=e.data().address1,this.address2=e.data().address2},async distribution(){const t=Object(c.i)(Object(c.b)(r.b,"distribution")),s=await Object(c.f)(t);await s.forEach(t=>{this.itemList.push({value:t.data().companyName,item:t.data().companyName})})},changeSelect(t){this.select=t},async order(){if(""===this.select)return void alert("배본사를 선택해주세요.");const t=Object(c.n)(r.b);try{this.$store.commit("common/setLoading",!0);const s=Object(c.j)();await this.books.forEach(e=>{const a=Object(c.d)(r.b,"orderRequest",e.id);t.update(a,{shop_order_status:4,release_time_id:this.$date().format("YYYYMMDDHHmmss"),release_time:s,distribution:this.select})}),await t.commit(),await this.load()}catch(t){console.log(t)}this.$store.commit("common/setLoading",!1)}}},d=(e("7bb1"),e("2877")),p={components:{DeliverList:Object(d.a)(n,(function(){var t=this,s=t._self._c;return s("section",[!t.mobile&&t.skeletonLoading?s("BookListSkeleton"):t._e(),t.mobile&&t.skeletonLoading?s("BookListMobileSkeleton"):t._e(),t.mobile||t.skeletonLoading?t._e():s("section",{staticClass:"header d-flex"},[s("div",[t._v("품목정보")]),s("div",[t._v("ISBN")]),t._m(0),s("div",[t._v("공급가")]),t._m(1),s("div",[t._v("상태")])]),s("ul",{staticClass:"body"},t._l(t.books,(function(e,a){var i;return s("li",{key:a,staticClass:"d-flex align-center"},[s("div",{staticClass:"d-flex align-center info-wrap"},[s("div",{staticClass:"book-info"},[s("h3",[t._v(t._s(e.data.subject))]),s("div",{staticClass:"author"},[t._v(t._s(e.data.author))])])]),s("div",{staticClass:"isbn"},[t._v(t._s(e.data.isbn))]),s("div",{staticClass:"d-flex price-info"},[s("div",{staticClass:"normal-price"},[t.mobile?s("span",[t._v("정가")]):t._e(),t._v(" "+t._s(null===(i=e.data.price)||void 0===i?void 0:i.toLocaleString())+"원")]),s("div",[t.mobile?s("span",[t._v("공급률")]):t._e(),t._v(" "+t._s(e.data.supply_rate)+"%")])]),s("div",{staticClass:"final-price"},[t.mobile?s("span",[t._v("공급가")]):t._e(),t._v(" "+t._s((e.data.price*e.data.supply_rate/100).toLocaleString())+"원")]),s("div",{staticClass:"d-flex price-info"},[s("div",{staticClass:"normal-price"},[t.mobile?s("span",[t._v("주문")]):t._e(),t._v(" "+t._s(e.data.count))]),s("div",{staticClass:"count"},[t.mobile?s("span",[t._v("공급")]):t._e(),s("span",{class:{warning:e.data.count>e.data.reply_count}},[t._v(t._s(e.data.reply_count))])])]),s("div",[t.mobile?s("span",[t._v("상태")]):t._e(),t._v(" "+t._s(3===e.data.shop_order_status?"-":4===e.data.shop_order_status?"출고":"완료"))])])})),0),t.skeletonLoading?t._e():s("section",{staticClass:"total-wrap mt24"},[s("div",[s("span",{staticClass:"total-prod"},[t._v("총 "+t._s(t.bookCount)+"권")]),s("span",{staticClass:"total"},[t._v("합계 "+t._s(t.totalPrice.toLocaleString())+"원")])]),s("div",{staticClass:"address"},[s("p",[t._v("수령지: "+t._s(t.address1)+" "+t._s(t.address2))]),t.books[0].data.shop_order_status>3?s("p",[t._v("배본사 : "+t._s(t.books[0].data.distribution))]):t._e()])]),t.skeletonLoading||3!==t.books[0].data.shop_order_status?t._e():s("div",{staticClass:"d-flex align-center mt10 justify-end"},[s("span",{staticClass:"mr10"},[t._v("배본 설정: ")]),s("Selects",{attrs:{itemList:t.itemList},on:{change:t.changeSelect}}),s("button",{staticClass:"primary ml10",on:{click:t.order}},[t._v("출고지시")])],1)],1)}),[function(){var t=this._self._c;return t("div",{staticClass:"d-flex"},[t("div",[this._v("정가")]),t("div",[this._v("공급률")])])},function(){var t=this._self._c;return t("div",{staticClass:"d-flex"},[t("div",[this._v("주문")]),t("div",[this._v("공급")])])}],!1,null,"03504544",null).exports},data(){return{id:this.$route.params.id,date:this.$route.params.date,shopName:this.$route.params.shopName,orderRealTimeId:this.$route.params.orderRealTimeId,uid:this.$route.params.uid}}},v=(e("5266"),Object(d.a)(p,(function(){var t=this,s=t._self._c;return s("section",[s("h2",{staticClass:"sub-title"},[t._v("주문 상세 보기 및 내역서 회신")]),s("section",{staticClass:"sub-container"},[s("article",{staticClass:"order-info d-flex justify-space-between"},[s("div",[t._v("\n        서점명: "),s("strong",[t._v(t._s(t.shopName))])]),s("div",[t._v(t._s(t.date))])]),s("DeliverList",{attrs:{id:t.id,orderRealTimeId:t.orderRealTimeId,uid:t.uid}})],1)])}),[],!1,null,"497f60f8",null));s.default=v.exports},f412:function(t,s,e){"use strict";e("c2fe")}}]);